containers:
  - name: coordinator
    image: alpine
    command: ["sh", "-c", "while true; do sleep 3600; done"]




coordinator:
  etcFiles:
    jvm.config: |
      -server
      -XX:G1HeapRegionSize=32M
      -XX:+ExplicitGCInvokesConcurrent
      -XX:+HeapDumpOnOutOfMemoryError
      -XX:-OmitStackTraceInFastThrow
      -XX:ReservedCodeCacheSize=512M
      -XX:PerMethodRecompilationCutoff=10000
      -XX:PerBytecodeRecompilationCutoff=10000
      -Djdk.attach.allowAttachSelf=true
      -Djdk.nio.maxCachedBufferSize=2000000
      -Dfile.encoding=UTF-8
      --add-opens=java.base/sun.nio.ch=ALL-UNNAMED
      --add-opens=java.base/java.nio=ALL-UNNAMED
      --add-opens=java.base/java.lang=ALL-UNNAMED
      --add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED
      -XX:+UseG1GC
      -agentpath:/usr/lib/starburst/bin/libjvmkill.so
      -XX:+UnlockDiagnosticVMOptions
      -XX:G1NumCollectionsKeepPinned=10000000
      -Djdk.attach.allowAttachSelf=true
      -XX:+UseAESCTRIntrinsics
      -XX:GCLockerRetryAllocationCount=100
      -Djavax.net.ssl.trustStore=/etc/starburst/truststore/minio.crt
      -Djavax.net.ssl.trustStoreType=PEM

  volumeMounts:
    - name: starburst-truststore
      mountPath: /etc/starburst/truststore
      readOnly: true

volumes:
  - name: starburst-truststore
    secret:
      secretName: starburst-truststore
      items:
        - key: minio.crt
          path: minio.crt
